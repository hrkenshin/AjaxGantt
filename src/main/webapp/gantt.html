<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">
<head>
<title>간트챠트</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

<!-- Raphael -->
<script type="text/javascript" src="resource/ajax/raphael-custom.js"></script>

<!-- ExtJS -->
<link rel="stylesheet" type="text/css" href="resource/ajax/ext-3.1.1/resources/css/ext-all.css"/>
<script type="text/javascript" src="resource/ajax/ext-3.1.1/adapter/ext/ext-base.js"></script>
<script type="text/javascript" src="resource/ajax/ext-3.1.1/ext-all-debug.js"></script>
<script type="text/javascript" src="resource/ajax/ext-3.1.1/src/locale/ext-lang-en.js"></script>

<!-- ExtJS - User Extension(Ext.ux.SpinnerField) -->
<link rel="stylesheet" type="text/css" href="resource/ajax/ext-3.1.1/ux/css/Spinner.css"/>
<script type="text/javascript" src="resource/ajax/ext-3.1.1/ux/Spinner.js"></script>
<script type="text/javascript" src="resource/ajax/ext-3.1.1/ux/SpinnerField.js"></script>

<!-- ExtJS - User Extension : Panel Resizer -->
<link rel="stylesheet" type="text/css" href="resource/ajax/ext-3.1.1/ux/css/PanelResizer.css"/>
<script type="text/javascript" src="resource/ajax/ext-3.1.1/ux/PanelResizer.js"></script>


<!-- ExtJS - User Extension : RowExpander -->
<!--<script type='text/javascript' src='resource/ajax/ext-3.1.1/ux/RowExpander.js'></script>-->

<!-- ExtJS - User Extension : MaximGB TreeGrid -->
<link rel="stylesheet" type="text/css" href="resource/ajax/ext-3.1.1/ux/ux.maximgb.tg/css/TreeGrid.css"/>
<script type='text/javascript' src='resource/ajax/ext-3.1.1/ux/ux.maximgb.tg/TreeGrid.js'></script>

<!-- ExtJS - User Extension : ColumnHeaderGroup -->
<link rel="stylesheet" type="text/css" href="resource/ajax/ext-3.1.1/ux/css/ColumnHeaderGroup.css"/>
<script type="text/javascript" src="resource/ajax/ext-3.1.1/ux/ColumnHeaderGroup.js"></script>

<!-- Gantt Chart -->
<link rel="stylesheet" type="text/css" href="resource/css/Ext.ux.gantt.css"/>
<script type='text/javascript' src='resource/js/Ext.ux.gantt.Common.js'></script>
<script type='text/javascript' src='resource/js/Ext.ux.gantt.Properties.js'></script>
<script type='text/javascript' src='resource/js/Ext.ux.gantt.AjaxRequest.js'></script>
<script type='text/javascript' src='resource/js/Ext.ux.gantt.ScheduleBar.js'></script>
<script type='text/javascript' src='resource/js/Ext.ux.gantt.TaskTreeGrid.js'></script>
<script type='text/javascript' src='resource/js/Ext.ux.gantt.ChartGrid.js'></script>
<script type='text/javascript' src='resource/js/Ext.ux.gantt.GanttChartPanel.js'></script>
<script type='text/javascript' src='resource/js/locale/gantt-lang-en.js'></script>

<script type='text/javascript' src='resource/js/Ext.ux.codi.UserView.js'></script>
<script type="text/javascript">
Ext.BLANK_IMAGE_URL = 'resource/ajax/ext-3.1.1/resources/images/default/s.gif';

Ext.onReady(function () {
    Ext.QuickTips.init();

    // Define Sample Task Data
    // Project 정보
    var project = {
        '@uid'      : 'String',
        name        : 'String',
        subject     : 'String',
        category    : 'String',
        description : 'String',
        author      : 'String',
        creationDate: '2001-12-17T09:30:47Z',
        updatedDate : '2001-12-17T09:30:47Z',
        startDate   : '2013-09-23',
        finishDate  : '2013-10-19',
        status      : 'String',
        Tasks       : {
            Task: [
                {
                    '@uid'          : '1',
                    '@seqNo'        : '',
                    '@parent'       : null,
                    '@from'         : '',
                    '@to'           : '2',
                    '@wbsLevel'     : 1,
                    '@isLeaf'       : true,
                    title           : '태스크 1',
                    type            : '',
                    startDate       : '2013-09-23',
                    endDate         : '2013-09-25',
                    duration        : 3,
                    startDate_run   : '2013-09-23',
                    endDate_run     : '2013-09-27',
                    duration_run    : 5,
                    description     : 'String',
                    status          : 'String',
                    priority        : 0,
                    resources       : 'String',
                    completeRate    : 50,
                    completeRate_run: 50
                },
                {
                    '@uid'          : '2',
                    '@seqNo'        : '',
                    '@parent'       : null,
                    '@from'         : '1',
                    '@to'           : '3',
                    '@wbsLevel'     : 1,
                    '@isLeaf'       : true,
                    title           : '태스트 2',
                    type            : 'String',
                    startDate       : '2013-09-28',
                    endDate         : '2013-09-30',
                    duration        : 3,
                    startDate_run   : '2013-10-05',
                    endDate_run     : '2013-10-07',
                    duration_run    : 3,
                    description     : 'String',
                    status          : 'String',
                    priority        : 0,
                    resources       : 'String',
                    completeRate    : 50,
                    completeRate_run: 50
                },
                {
                    '@uid'          : '3',
                    '@seqNo'        : '',
                    '@parent'       : null,
                    '@from'         : '2',
                    '@to'           : '6',
                    '@wbsLevel'     : 1,
                    '@isLeaf'       : false,
                    title           : '태스크 3',
                    type            : 'String',
                    startDate       : '2013-10-08',
                    endDate         : '2013-10-12',
                    duration        : 5,
                    startDate_run   : '2013-10-08',
                    endDate_run     : '2013-10-12',
                    duration_run    : 5,
                    description     : 'String',
                    status          : 'String',
                    priority        : 0,
                    resources       : 'String',
                    completeRate    : 50,
                    completeRate_run: 50
                },
                {
                    '@uid'          : '4',
                    '@seqNo'        : '',
                    '@parent'       : '3',
                    '@from'         : '',
                    '@to'           : '5',
                    '@wbsLevel'     : 1,
                    '@isLeaf'       : true,
                    title           : '태스크 3-1',
                    type            : '',
                    startDate       : '2013-10-08',
                    endDate         : '2013-10-10',
                    duration        : 3,
                    startDate_run   : '2013-10-08',
                    endDate_run     : '2013-10-10',
                    duration_run    : 3,
                    description     : 'String',
                    status          : 'String',
                    priority        : 0,
                    resources       : 'String',
                    completeRate    : 50,
                    completeRate_run: 50
                },
                {
                    '@uid'          : '5',
                    '@seqNo'        : '',
                    '@parent'       : '3',
                    '@from'         : '4',
                    '@to'           : '7',
                    '@wbsLevel'     : 2,
                    '@isLeaf'       : true,
                    title           : '태스크 3-2',
                    type            : 'M',
                    startDate       : '2013-10-12',
                    endDate         : '2013-10-12',
                    duration        : 1,
                    startDate_run   : '2013-10-12',
                    endDate_run     : '2013-10-12',
                    duration_run    : 1,
                    description     : 'String',
                    status          : 'String',
                    priority        : 0,
                    resources       : 'String',
                    completeRate    : 50,
                    completeRate_run: 50
                },
                {
                    '@uid'          : '6',
                    '@seqNo'        : '',
                    '@parent'       : null,
                    '@from'         : '3',
                    '@to'           : '',
                    '@wbsLevel'     : 1,
                    '@isLeaf'       : false,
                    title           : 'Task 4',
                    type            : 'String',
                    startDate       : '2013-10-15',
                    endDate         : '2013-10-19',
                    duration        : 5,
                    startDate_run   : '2013-10-15',
                    endDate_run     : '2013-10-19',
                    duration_run    : 5,
                    description     : 'String',
                    status          : 'String',
                    priority        : 0,
                    resources       : 'String',
                    completeRate    : 50,
                    completeRate_run: 50
                },
                {
                    '@uid'          : '7',
                    '@seqNo'        : '',
                    '@parent'       : '6',
                    '@from'         : '5,10',
                    '@to'           : '8',
                    '@wbsLevel'     : 2,
                    '@isLeaf'       : true,
                    title           : 'Task 4-1',
                    type            : '',
                    startDate       : '2013-10-15',
                    endDate         : '2013-10-17',
                    duration        : 3,
                    startDate_run   : '2013-10-15',
                    endDate_run     : '2013-10-17',
                    duration_run    : 3,
                    description     : 'String',
                    status          : 'String',
                    priority        : 0,
                    resources       : 'String',
                    completeRate    : 50,
                    completeRate_run: 50
                },
                {
                    '@uid'          : '8',
                    '@seqNo'        : '',
                    '@parent'       : '6',
                    '@from'         : '7',
                    '@to'           : '',
                    '@wbsLevel'     : 2,
                    '@isLeaf'       : true,
                    title           : 'Task 4-2',
                    type            : 'M',
                    startDate       : '2013-10-19',
                    endDate         : '2013-10-19',
                    duration        : 1,
                    startDate_run   : '2013-10-19',
                    endDate_run     : '2013-10-19',
                    duration_run    : 1,
                    description     : 'String',
                    status          : 'String',
                    priority        : 0,
                    resources       : 'String',
                    completeRate    : 50,
                    completeRate_run: 50
                },
                {
                    '@uid'          : '9',
                    '@seqNo'        : '',
                    '@parent'       : null,
                    '@from'         : '',
                    '@to'           : '',
                    '@wbsLevel'     : 1,
                    '@isLeaf'       : false,
                    title           : 'Task 5',
                    type            : '',
                    startDate       : '2013-10-10',
                    endDate         : '2013-10-12',
                    duration        : 3,
                    startDate_run   : '2013-10-10',
                    endDate_run     : '2013-10-12',
                    duration_run    : 3,
                    description     : 'String',
                    status          : 'String',
                    priority        : 0,
                    resources       : 'String',
                    completeRate    : 70,
                    completeRate_run: 70
                },
                {
                    '@uid'          : '10',
                    '@seqNo'        : '',
                    '@parent'       : '9',
                    '@from'         : '',
                    '@to'           : '7',
                    '@wbsLevel'     : 2,
                    '@isLeaf'       : true,
                    title           : 'Task 5-1',
                    type            : '',
                    startDate       : '2013-10-10',
                    endDate         : '2013-10-11',
                    duration        : 2,
                    startDate_run   : '2013-10-10',
                    endDate_run     : '2013-10-11',
                    duration_run    : 2,
                    description     : 'String',
                    status          : 'String',
                    priority        : 0,
                    resources       : 'String',
                    completeRate    : 50,
                    completeRate_run: 50
                }
            ]
        }
    };

    var ganttChartPanel = new Ext.ux.gantt.GanttChartPanel({
        header        : true,
        width         : 1000,
        height        : 450,
        treeGridWidth : 400,
        renderTo      : 'gantt_chart',
        viewMode      : 'D',
//        barMode       : 'D',
//        wireMode      : '_plan',
//        readOnly      : false,
        projectURL    : {
            forLoadSubTasks: '/rest/Gantt/LoadSubTasks'
        }, projectData: project
    });

    var viewport = new Ext.Viewport({
        layout: 'border',
        items : [
            {
                region   : 'center',
                contentEl: 'gantt_chart',
                border   : true,
                listeners: {
                    resize: function (component, adjWidth, adjHeight, rawWidth, rawHeight) {
                        if (ganttChartPanel != null) {
                            ganttChartPanel.setWidth(adjWidth);
                            ganttChartPanel.setHeight(adjHeight);
                        }
                    }
                }
            }
        ]
    });
//    end of 페이지 레이아웃 설정

//    var userView = new Ext.ux.codi.UserView({
//        chartId: ganttChartPanel.getId(),
//        ddGroup: ganttChartPanel.taskTree.getDDGroupId(),
//        data: [
//            {
//                empCode: '111',
//                empName: '이름1',
//                imgPath: '/resource/images/down.png',
//                email: '',
//                contextPath: ''
//            },
//            {
//                empCode: '222',
//                empName: '이름2',
//                imgPath: '/resource/images/up.png',
//                email: '',
//                contextPath: ''
//            }
//        ],
//        renderTo: 'userList'
//    });

//    new Ext.dd.DragSource("dragsource1", {
//        ddGroup: ganttChartPanel.taskTree.getDDGroupId(),
//        dragData: {
//            userData: {
//                empCode: '111',
//                empName: '이름1',
//                imgPath: '/resource/images/down.png',
//                email: '',
//                contextPath: ''
//            }
//        }
//    });
//
//    new Ext.dd.DragSource("dragsource2", {
//        ddGroup: ganttChartPanel.taskTree.getDDGroupId(),
//        dragData: {
//            userData: {
//                empCode: '222',
//                empName: '이름2',
//                imgPath: '/resource/images/down.png',
//                email: '',
//                contextPath: ''
//            }
//        }
//    });

    // 마우스 우클릭 막기
    Ext.EventManager.on(window.document, 'contextmenu', function (event, element, object) {
        event.stopEvent();
    });
});
</script>
<style type="text/css">
        /*.box {*/
        /*width: 200px;*/
        /*float: left;*/
        /*border: solid black 1px;*/
        /*padding: 20px;*/
        /*}*/
</style>
</head>
<body>
<!--<div>-->
<!--<div id="dragsource1" class="box">Drag me</div>-->
<!--<div id="dragsource2" class="box">Drag me</div>-->
<!--</div>-->
<div id='gantt_chart'></div>
</body>
</html>